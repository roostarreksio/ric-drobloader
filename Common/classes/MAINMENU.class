OBJECT=M_ITEMP0
M_ITEMP0:TYPE=INTEGER

OBJECT=M_ITEMP1
M_ITEMP1:TYPE=INTEGER

OBJECT=M_ITEMP2
M_ITEMP2:TYPE=INTEGER

OBJECT=M_STEMP0
M_STEMP0:TYPE=STRING

OBJECT=M_STEMP1
M_STEMP1:TYPE=STRING

OBJECT=M_BTEMP0
M_BTEMP0:TYPE=BOOL

OBJECT=M_IPOSY
M_IPOSY:TYPE=INTEGER

OBJECT=M_IPOPY
M_IPOPY:TYPE=INTEGER

OBJECT=M_IDIR
M_IDIR:TYPE=INTEGER
M_IDIR:VALUE=1

OBJECT=M_BSLIDER
M_BSLIDER:TYPE=BOOL
M_BSLIDER:VALUE=FALSE

OBJECT=M_ISLIDERX
M_ISLIDERX:TYPE=INTEGER

OBJECT=M_SSCENENAME
M_SSCENENAME:TYPE=STRING
M_SSCENENAME:VALUE=ARCADE

OBJECT=M_IACTION
M_IACTION:TYPE=INTEGER
M_IACTION:VALUE=-1

OBJECT=M_IDOACTION
M_IDOACTION:TYPE=INTEGER
M_IDOACTION:VALUE=-1
M_IDOACTION:ONBRUTALCHANGED^0={GAME^RUNENV(M_SSCENENAME,"_NEWGAME_");}
M_IDOACTION:ONBRUTALCHANGED^1={GAME^RUNENV(M_SSCENENAME,"_LOADGAME_");}
M_IDOACTION:ONBRUTALCHANGED^7={GAME^RUNENV(M_SSCENENAME,"BEHCREDITSGLOBAL");SHOW^RUN(FALSE);HIDEEXP^RUN();}

OBJECT=M_BPOPUP
M_BPOPUP:TYPE=BOOL
M_BPOPUP:VALUE=FALSE

OBJECT=M_SPOPACTION
M_SPOPACTION:TYPE=STRING

OBJECT=M_IPOPARG
M_IPOPARG:TYPE=INTEGER

OBJECT=M_BRESUME
M_BRESUME:TYPE=BOOL

OBJECT=M_ANNSTL
M_ANNSTL:TYPE=ANIMO
M_ANNSTL:VISIBLE=TRUE
M_ANNSTL:FILENAME=$COMMON\STL_MENU.ANN
M_ANNSTL:TOCANVAS=TRUE
M_ANNSTL:PRIORITY=0
M_ANNSTL:FPS=30
M_ANNSTL:PRELOAD=TRUE
M_ANNSTL:RELEASE=TRUE
M_ANNSTL:MONITORCOLLISION=FALSE
M_ANNSTL:MONITORCOLLISIONALPHA=FALSE
M_ANNSTL:ONFRAMECHANGED^ELAPSE={M_ITEMP0^SET([M_IDIR*20]);M_IPOSY^ADD(M_ITEMP0);M_GRPMENU^MOVE(0,M_ITEMP0);M_ITEMP1^SET([M_IPOSY*255]);M_ITEMP1^DIV(-540);M_ENTER^SETOPACITY(M_ITEMP1);M_ITEMP1^SET([255-M_ITEMP1]);M_GRPMENU^SETOPACITY(M_ITEMP1);@IF("M_IDIR'-1&&M_IPOSY'-60","BFITMP9","");@IF("M_IPOSY'0||M_IPOSY'-540","BFITMP12","");}

OBJECT=M_CONTINUE
M_CONTINUE:TYPE=ANIMO
M_CONTINUE:VISIBLE=TRUE
M_CONTINUE:FILENAME=$COMMON\M_CONTINUE.ANN
M_CONTINUE:TOCANVAS=TRUE
M_CONTINUE:PRIORITY=4001
M_CONTINUE:FPS=16
M_CONTINUE:PRELOAD=TRUE
M_CONTINUE:RELEASE=TRUE
M_CONTINUE:MONITORCOLLISION=FALSE
M_CONTINUE:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_EXIT
M_EXIT:TYPE=ANIMO
M_EXIT:VISIBLE=TRUE
M_EXIT:FILENAME=$COMMON\M_EXIT.ANN
M_EXIT:TOCANVAS=TRUE
M_EXIT:PRIORITY=4001
M_EXIT:FPS=16
M_EXIT:PRELOAD=TRUE
M_EXIT:RELEASE=TRUE
M_EXIT:MONITORCOLLISION=FALSE
M_EXIT:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_LOAD1
M_LOAD1:TYPE=ANIMO
M_LOAD1:VISIBLE=TRUE
M_LOAD1:FILENAME=$COMMON\M_LOAD1.ANN
M_LOAD1:TOCANVAS=TRUE
M_LOAD1:PRIORITY=4002
M_LOAD1:FPS=16
M_LOAD1:PRELOAD=TRUE
M_LOAD1:RELEASE=TRUE
M_LOAD1:MONITORCOLLISION=FALSE
M_LOAD1:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_LOAD2
M_LOAD2:TYPE=ANIMO
M_LOAD2:VISIBLE=TRUE
M_LOAD2:FILENAME=$COMMON\M_LOAD2.ANN
M_LOAD2:TOCANVAS=TRUE
M_LOAD2:PRIORITY=4002
M_LOAD2:FPS=16
M_LOAD2:PRELOAD=TRUE
M_LOAD2:RELEASE=TRUE
M_LOAD2:MONITORCOLLISION=FALSE
M_LOAD2:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_LOAD3
M_LOAD3:TYPE=ANIMO
M_LOAD3:VISIBLE=TRUE
M_LOAD3:FILENAME=$COMMON\M_LOAD3.ANN
M_LOAD3:TOCANVAS=TRUE
M_LOAD3:PRIORITY=4002
M_LOAD3:FPS=16
M_LOAD3:PRELOAD=TRUE
M_LOAD3:RELEASE=TRUE
M_LOAD3:MONITORCOLLISION=FALSE
M_LOAD3:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_LOAD4
M_LOAD4:TYPE=ANIMO
M_LOAD4:VISIBLE=TRUE
M_LOAD4:FILENAME=$COMMON\M_LOAD4.ANN
M_LOAD4:TOCANVAS=TRUE
M_LOAD4:PRIORITY=4002
M_LOAD4:FPS=16
M_LOAD4:PRELOAD=TRUE
M_LOAD4:RELEASE=TRUE
M_LOAD4:MONITORCOLLISION=FALSE
M_LOAD4:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SAVE1
M_SAVE1:TYPE=ANIMO
M_SAVE1:VISIBLE=TRUE
M_SAVE1:FILENAME=$COMMON\M_SAVE1.ANN
M_SAVE1:TOCANVAS=TRUE
M_SAVE1:PRIORITY=4002
M_SAVE1:FPS=16
M_SAVE1:PRELOAD=TRUE
M_SAVE1:RELEASE=TRUE
M_SAVE1:MONITORCOLLISION=FALSE
M_SAVE1:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SAVE2
M_SAVE2:TYPE=ANIMO
M_SAVE2:VISIBLE=TRUE
M_SAVE2:FILENAME=$COMMON\M_SAVE2.ANN
M_SAVE2:TOCANVAS=TRUE
M_SAVE2:PRIORITY=4002
M_SAVE2:FPS=16
M_SAVE2:PRELOAD=TRUE
M_SAVE2:RELEASE=TRUE
M_SAVE2:MONITORCOLLISION=FALSE
M_SAVE2:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SAVE3
M_SAVE3:TYPE=ANIMO
M_SAVE3:VISIBLE=TRUE
M_SAVE3:FILENAME=$COMMON\M_SAVE3.ANN
M_SAVE3:TOCANVAS=TRUE
M_SAVE3:PRIORITY=4002
M_SAVE3:FPS=16
M_SAVE3:PRELOAD=TRUE
M_SAVE3:RELEASE=TRUE
M_SAVE3:MONITORCOLLISION=FALSE
M_SAVE3:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SAVE4
M_SAVE4:TYPE=ANIMO
M_SAVE4:VISIBLE=TRUE
M_SAVE4:FILENAME=$COMMON\M_SAVE4.ANN
M_SAVE4:TOCANVAS=TRUE
M_SAVE4:PRIORITY=4002
M_SAVE4:FPS=16
M_SAVE4:PRELOAD=TRUE
M_SAVE4:RELEASE=TRUE
M_SAVE4:MONITORCOLLISION=FALSE
M_SAVE4:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_NEW
M_NEW:TYPE=ANIMO
M_NEW:VISIBLE=TRUE
M_NEW:FILENAME=$COMMON\M_NEW.ANN
M_NEW:TOCANVAS=TRUE
M_NEW:PRIORITY=4001
M_NEW:FPS=16
M_NEW:PRELOAD=TRUE
M_NEW:RELEASE=TRUE
M_NEW:MONITORCOLLISION=FALSE
M_NEW:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_ENTER
M_ENTER:TYPE=ANIMO
M_ENTER:VISIBLE=TRUE
M_ENTER:FILENAME=$COMMON\M_ENTER.ANN
M_ENTER:TOCANVAS=TRUE
M_ENTER:PRIORITY=3999
M_ENTER:FPS=16
M_ENTER:PRELOAD=TRUE
M_ENTER:RELEASE=TRUE
M_ENTER:MONITORCOLLISION=FALSE
M_ENTER:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_NO
M_NO:TYPE=ANIMO
M_NO:VISIBLE=TRUE
M_NO:FILENAME=$COMMON\M_NO.ANN
M_NO:TOCANVAS=TRUE
M_NO:PRIORITY=4002
M_NO:FPS=16
M_NO:PRELOAD=TRUE
M_NO:RELEASE=TRUE
M_NO:MONITORCOLLISION=FALSE
M_NO:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_YES
M_YES:TYPE=ANIMO
M_YES:VISIBLE=TRUE
M_YES:FILENAME=$COMMON\M_YES.ANN
M_YES:TOCANVAS=TRUE
M_YES:PRIORITY=4002
M_YES:FPS=16
M_YES:PRELOAD=TRUE
M_YES:RELEASE=TRUE
M_YES:MONITORCOLLISION=FALSE
M_YES:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_ANNSTL1
M_ANNSTL1:TYPE=ANIMO
M_ANNSTL1:VISIBLE=TRUE
M_ANNSTL1:FILENAME=$COMMON\STL_MENU1.ANN
M_ANNSTL1:TOCANVAS=TRUE
M_ANNSTL1:PRIORITY=0
M_ANNSTL1:FPS=30
M_ANNSTL1:PRELOAD=TRUE
M_ANNSTL1:RELEASE=TRUE
M_ANNSTL1:MONITORCOLLISION=FALSE
M_ANNSTL1:MONITORCOLLISIONALPHA=FALSE
M_ANNSTL1:ONFRAMECHANGED^ELAPSE={M_ITEMP0^SET([M_IDIR*10]);M_IPOPY^ADD(M_ITEMP0);M_GRPPOPUP^MOVE(0,M_ITEMP0);M_ITEMP1^SET([M_IPOPY*255]);M_ITEMP1^DIV(80);M_ITEMP1^SET([255-M_ITEMP1]);M_GRPPOPUP^SETOPACITY(M_ITEMP1);@IF("M_IPOPY'0||M_IPOPY'80","BFITMP15","");}

OBJECT=M_KLEPSYDRA
M_KLEPSYDRA:TYPE=ANIMO
M_KLEPSYDRA:VISIBLE=TRUE
M_KLEPSYDRA:FILENAME=$COMMON\KLEPSYDRA.ANN
M_KLEPSYDRA:TOCANVAS=TRUE
M_KLEPSYDRA:PRIORITY=3999
M_KLEPSYDRA:FPS=16
M_KLEPSYDRA:PRELOAD=TRUE
M_KLEPSYDRA:RELEASE=TRUE
M_KLEPSYDRA:MONITORCOLLISION=FALSE
M_KLEPSYDRA:MONITORCOLLISIONALPHA=FALSE
M_KLEPSYDRA:ONFINISHED^PANEL={ADDEXP^RUN(0);}

OBJECT=M_WAND
M_WAND:TYPE=ANIMO
M_WAND:VISIBLE=FALSE
M_WAND:FILENAME=$COMMON\M_WAND.ANN
M_WAND:TOCANVAS=TRUE
M_WAND:PRIORITY=3999
M_WAND:FPS=16
M_WAND:PRELOAD=TRUE
M_WAND:RELEASE=TRUE
M_WAND:MONITORCOLLISION=FALSE
M_WAND:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_BKG
M_BKG:TYPE=IMAGE
M_BKG:VISIBLE=TRUE
M_BKG:FILENAME=$COMMON\M_BKG.IMG
M_BKG:TOCANVAS=TRUE
M_BKG:PRIORITY=3999
M_BKG:PRELOAD=TRUE
M_BKG:RELEASE=TRUE
M_BKG:MONITORCOLLISION=FALSE
M_BKG:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_MUSBTN
M_MUSBTN:TYPE=IMAGE
M_MUSBTN:VISIBLE=TRUE
M_MUSBTN:FILENAME=$COMMON\M_MUSBTN.IMG
M_MUSBTN:TOCANVAS=TRUE
M_MUSBTN:PRIORITY=4001
M_MUSBTN:PRELOAD=TRUE
M_MUSBTN:RELEASE=TRUE
M_MUSBTN:MONITORCOLLISION=FALSE
M_MUSBTN:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_HIGH1
M_HIGH1:TYPE=IMAGE
M_HIGH1:VISIBLE=TRUE
M_HIGH1:FILENAME=$COMMON\M_HIGH1.IMG
M_HIGH1:TOCANVAS=TRUE
M_HIGH1:PRIORITY=4000
M_HIGH1:PRELOAD=TRUE
M_HIGH1:RELEASE=TRUE
M_HIGH1:MONITORCOLLISION=FALSE
M_HIGH1:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_HIGH2
M_HIGH2:TYPE=IMAGE
M_HIGH2:VISIBLE=TRUE
M_HIGH2:FILENAME=$COMMON\M_HIGH2.IMG
M_HIGH2:TOCANVAS=TRUE
M_HIGH2:PRIORITY=4000
M_HIGH2:PRELOAD=TRUE
M_HIGH2:RELEASE=TRUE
M_HIGH2:MONITORCOLLISION=FALSE
M_HIGH2:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_HIGH3
M_HIGH3:TYPE=IMAGE
M_HIGH3:VISIBLE=TRUE
M_HIGH3:FILENAME=$COMMON\M_HIGH3.IMG
M_HIGH3:TOCANVAS=TRUE
M_HIGH3:PRIORITY=4000
M_HIGH3:PRELOAD=TRUE
M_HIGH3:RELEASE=TRUE
M_HIGH3:MONITORCOLLISION=FALSE
M_HIGH3:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_HIGH4
M_HIGH4:TYPE=IMAGE
M_HIGH4:VISIBLE=TRUE
M_HIGH4:FILENAME=$COMMON\M_HIGH4.IMG
M_HIGH4:TOCANVAS=TRUE
M_HIGH4:PRIORITY=4000
M_HIGH4:PRELOAD=TRUE
M_HIGH4:RELEASE=TRUE
M_HIGH4:MONITORCOLLISION=FALSE
M_HIGH4:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SHOT1
M_SHOT1:TYPE=IMAGE
M_SHOT1:VISIBLE=TRUE
M_SHOT1:FILENAME=$COMMON\M_SHOT1.IMG
M_SHOT1:TOCANVAS=TRUE
M_SHOT1:PRIORITY=4000
M_SHOT1:PRELOAD=TRUE
M_SHOT1:RELEASE=TRUE
M_SHOT1:MONITORCOLLISION=FALSE
M_SHOT1:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SHOT2
M_SHOT2:TYPE=IMAGE
M_SHOT2:VISIBLE=TRUE
M_SHOT2:FILENAME=$COMMON\M_SHOT2.IMG
M_SHOT2:TOCANVAS=TRUE
M_SHOT2:PRIORITY=4000
M_SHOT2:PRELOAD=TRUE
M_SHOT2:RELEASE=TRUE
M_SHOT2:MONITORCOLLISION=FALSE
M_SHOT2:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SHOT3
M_SHOT3:TYPE=IMAGE
M_SHOT3:VISIBLE=TRUE
M_SHOT3:FILENAME=$COMMON\M_SHOT3.IMG
M_SHOT3:TOCANVAS=TRUE
M_SHOT3:PRIORITY=4000
M_SHOT3:PRELOAD=TRUE
M_SHOT3:RELEASE=TRUE
M_SHOT3:MONITORCOLLISION=FALSE
M_SHOT3:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_SHOT4
M_SHOT4:TYPE=IMAGE
M_SHOT4:VISIBLE=TRUE
M_SHOT4:FILENAME=$COMMON\M_SHOT4.IMG
M_SHOT4:TOCANVAS=TRUE
M_SHOT4:PRIORITY=4000
M_SHOT4:PRELOAD=TRUE
M_SHOT4:RELEASE=TRUE
M_SHOT4:MONITORCOLLISION=FALSE
M_SHOT4:MONITORCOLLISIONALPHA=FALSE

OBJECT=M_POP
M_POP:TYPE=IMAGE
M_POP:VISIBLE=TRUE
M_POP:FILENAME=$COMMON\M_POP.IMG
M_POP:TOCANVAS=TRUE
M_POP:PRIORITY=4000
M_POP:PRELOAD=TRUE
M_POP:RELEASE=TRUE
M_POP:MONITORCOLLISION=FALSE
M_POP:MONITORCOLLISIONALPHA=FALSE

OBJECT=BTNSLIDER
BTNSLIDER:TYPE=BUTTON
BTNSLIDER:VISIBLE=TRUE
BTNSLIDER:ENABLE=TRUE
BTNSLIDER:DRAGGABLE=TRUE
BTNSLIDER:GFXSTANDARD=M_MUSBTN
BTNSLIDER:ONDRAGGING={M_ITEMP0^SET(M_MUSBTN^GETPOSITIONY());M_ITEMP0^CLAMP(115,415);M_MUSBTN^SETPOSITION(M_ISLIDERX,M_ITEMP0);M_ITEMP0^SUB(115);M_ITEMP0^MUL(800);M_ITEMP0^DIV(300);M_ITEMP0^SET([800-M_ITEMP0]);G_ARRSETTINGS^CHANGEAT(1,M_ITEMP0);GAME^RUNENV(M_SSCENENAME,"_VOLUME_");}
BTNSLIDER:ONENDDRAGGING={__SAVE_SETTINGS__^RUN();}
BTNSLIDER:ONFOCUSON={@IF(M_SNDVOLUME^ISPLAYING(),"_","FALSE","BFITMP16","");}

OBJECT=BTNEXIT
BTNEXIT:TYPE=BUTTON
BTNEXIT:VISIBLE=TRUE
BTNEXIT:ENABLE=TRUE
BTNEXIT:DRAGGABLE=FALSE
BTNEXIT:GFXSTANDARD=M_EXIT
BTNEXIT:ONFOCUSON={STOPALLSOUNDS^RUN();M_SNDEXIT^PLAY();HIGHLIGHT^RUN(0);M_EXIT^PLAY("ONFOCUSON");}
BTNEXIT:ONFOCUSOFF={M_EXIT^PLAY("ONNOEVENT");}
BTNEXIT:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPEXIT^PLAY();M_SPOPACTION^SET("EXIT");M_IPOPARG^SET(0);POPUP^RUN();}

OBJECT=BTNNEW
BTNNEW:TYPE=BUTTON
BTNNEW:VISIBLE=TRUE
BTNNEW:ENABLE=TRUE
BTNNEW:DRAGGABLE=FALSE
BTNNEW:GFXSTANDARD=M_NEW
BTNNEW:ONFOCUSON={STOPALLSOUNDS^RUN();M_SNDNEWGAME^PLAY();HIGHLIGHT^RUN(0);M_NEW^PLAY("ONFOCUSON");}
BTNNEW:ONFOCUSOFF={M_NEW^PLAY("ONNOEVENT");}
BTNNEW:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPNEW^PLAY();M_SPOPACTION^SET("NEWGAME");M_IPOPARG^SET(0);POPUP^RUN();}

OBJECT=BTNCONTINUE
BTNCONTINUE:TYPE=BUTTON
BTNCONTINUE:VISIBLE=TRUE
BTNCONTINUE:ENABLE=TRUE
BTNCONTINUE:DRAGGABLE=FALSE
BTNCONTINUE:GFXSTANDARD=M_CONTINUE
BTNCONTINUE:ONFOCUSON={@IF(M_SNDCONTINUE^ISPLAYING(),"_","FALSE","BFITMP17","");HIGHLIGHT^RUN(0);M_CONTINUE^PLAY("ONFOCUSON");}
BTNCONTINUE:ONFOCUSOFF={M_CONTINUE^PLAY("ONNOEVENT");}
BTNCONTINUE:ONCLICKED={@IF("M_BRESUME","_","TRUE","BFITMP18","BFITMP19");}

OBJECT=BTNLOAD1
BTNLOAD1:TYPE=BUTTON
BTNLOAD1:VISIBLE=TRUE
BTNLOAD1:ENABLE=TRUE
BTNLOAD1:DRAGGABLE=FALSE
BTNLOAD1:GFXSTANDARD=M_LOAD1
BTNLOAD1:ONFOCUSON={@IF(M_SNDLOAD^ISPLAYING(),"_","FALSE","BFITMP20","");M_LOAD1^PLAY("ONFOCUSON");HIGHLIGHT^RUN(1);}
BTNLOAD1:ONFOCUSOFF={M_LOAD1^PLAY("ONNOEVENT");}
BTNLOAD1:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPLOAD^PLAY();M_SPOPACTION^SET("LOADGAME");M_IPOPARG^SET(1);POPUP^RUN();}

OBJECT=BTNLOAD2
BTNLOAD2:TYPE=BUTTON
BTNLOAD2:VISIBLE=TRUE
BTNLOAD2:ENABLE=TRUE
BTNLOAD2:DRAGGABLE=FALSE
BTNLOAD2:GFXSTANDARD=M_LOAD2
BTNLOAD2:ONFOCUSON={@IF(M_SNDLOAD^ISPLAYING(),"_","FALSE","BFITMP21","");M_LOAD2^PLAY("ONFOCUSON");HIGHLIGHT^RUN(2);}
BTNLOAD2:ONFOCUSOFF={M_LOAD2^PLAY("ONNOEVENT");}
BTNLOAD2:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPLOAD^PLAY();M_SPOPACTION^SET("LOADGAME");M_IPOPARG^SET(2);POPUP^RUN();}

OBJECT=BTNLOAD3
BTNLOAD3:TYPE=BUTTON
BTNLOAD3:VISIBLE=TRUE
BTNLOAD3:ENABLE=TRUE
BTNLOAD3:DRAGGABLE=FALSE
BTNLOAD3:GFXSTANDARD=M_LOAD3
BTNLOAD3:ONFOCUSON={@IF(M_SNDLOAD^ISPLAYING(),"_","FALSE","BFITMP22","");M_LOAD3^PLAY("ONFOCUSON");HIGHLIGHT^RUN(3);}
BTNLOAD3:ONFOCUSOFF={M_LOAD3^PLAY("ONNOEVENT");}
BTNLOAD3:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPLOAD^PLAY();M_SPOPACTION^SET("LOADGAME");M_IPOPARG^SET(3);POPUP^RUN();}

OBJECT=BTNLOAD4
BTNLOAD4:TYPE=BUTTON
BTNLOAD4:VISIBLE=TRUE
BTNLOAD4:ENABLE=TRUE
BTNLOAD4:DRAGGABLE=FALSE
BTNLOAD4:GFXSTANDARD=M_LOAD4
BTNLOAD4:ONFOCUSON={@IF(M_SNDLOAD^ISPLAYING(),"_","FALSE","BFITMP23","");M_LOAD4^PLAY("ONFOCUSON");HIGHLIGHT^RUN(4);}
BTNLOAD4:ONFOCUSOFF={M_LOAD4^PLAY("ONNOEVENT");}
BTNLOAD4:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPLOAD^PLAY();M_SPOPACTION^SET("LOADGAME");M_IPOPARG^SET(4);POPUP^RUN();}

OBJECT=BTNSAVE1
BTNSAVE1:TYPE=BUTTON
BTNSAVE1:VISIBLE=TRUE
BTNSAVE1:ENABLE=TRUE
BTNSAVE1:DRAGGABLE=FALSE
BTNSAVE1:GFXSTANDARD=M_SAVE1
BTNSAVE1:ONFOCUSON={@IF(M_SNDSAVE^ISPLAYING(),"_","FALSE","BFITMP24","");M_SAVE1^PLAY("ONFOCUSON");HIGHLIGHT^RUN(1);}
BTNSAVE1:ONFOCUSOFF={M_SAVE1^PLAY("ONNOEVENT");}
BTNSAVE1:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPSAVE^PLAY();M_SPOPACTION^SET("SAVEGAME");M_IPOPARG^SET(1);POPUP^RUN();}

OBJECT=BTNSAVE2
BTNSAVE2:TYPE=BUTTON
BTNSAVE2:VISIBLE=TRUE
BTNSAVE2:ENABLE=TRUE
BTNSAVE2:DRAGGABLE=FALSE
BTNSAVE2:GFXSTANDARD=M_SAVE2
BTNSAVE2:ONFOCUSON={@IF(M_SNDSAVE^ISPLAYING(),"_","FALSE","BFITMP25","");M_SAVE2^PLAY("ONFOCUSON");HIGHLIGHT^RUN(2);}
BTNSAVE2:ONFOCUSOFF={M_SAVE2^PLAY("ONNOEVENT");}
BTNSAVE2:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPSAVE^PLAY();M_SPOPACTION^SET("SAVEGAME");M_IPOPARG^SET(2);POPUP^RUN();}

OBJECT=BTNSAVE3
BTNSAVE3:TYPE=BUTTON
BTNSAVE3:VISIBLE=TRUE
BTNSAVE3:ENABLE=TRUE
BTNSAVE3:DRAGGABLE=FALSE
BTNSAVE3:GFXSTANDARD=M_SAVE3
BTNSAVE3:ONFOCUSON={@IF(M_SNDSAVE^ISPLAYING(),"_","FALSE","BFITMP26","");M_SAVE3^PLAY("ONFOCUSON");HIGHLIGHT^RUN(3);}
BTNSAVE3:ONFOCUSOFF={M_SAVE3^PLAY("ONNOEVENT");}
BTNSAVE3:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPSAVE^PLAY();M_SPOPACTION^SET("SAVEGAME");M_IPOPARG^SET(3);POPUP^RUN();}

OBJECT=BTNSAVE4
BTNSAVE4:TYPE=BUTTON
BTNSAVE4:VISIBLE=TRUE
BTNSAVE4:ENABLE=TRUE
BTNSAVE4:DRAGGABLE=FALSE
BTNSAVE4:GFXSTANDARD=M_SAVE4
BTNSAVE4:ONFOCUSON={@IF(M_SNDSAVE^ISPLAYING(),"_","FALSE","BFITMP27","");M_SAVE4^PLAY("ONFOCUSON");HIGHLIGHT^RUN(4);}
BTNSAVE4:ONFOCUSOFF={M_SAVE4^PLAY("ONNOEVENT");}
BTNSAVE4:ONCLICKED={STOPALLSOUNDS^RUN();M_SNDPOPSAVE^PLAY();M_SPOPACTION^SET("SAVEGAME");M_IPOPARG^SET(4);POPUP^RUN();}

OBJECT=BTNMENU
BTNMENU:TYPE=BUTTON
BTNMENU:VISIBLE=TRUE
BTNMENU:ENABLE=TRUE
BTNMENU:DRAGGABLE=FALSE
BTNMENU:GFXSTANDARD=M_ENTER
BTNMENU:ONFOCUSON={M_ENTER^PLAY("ONFOCUSON");}
BTNMENU:ONFOCUSOFF={M_ENTER^PLAY("ONNOEVENT");}
BTNMENU:ONCLICKED={TOGGLE^RUN();}

OBJECT=BTNYES
BTNYES:TYPE=BUTTON
BTNYES:VISIBLE=TRUE
BTNYES:ENABLE=TRUE
BTNYES:DRAGGABLE=FALSE
BTNYES:GFXSTANDARD=M_YES
BTNYES:ONFOCUSON={@IF(M_SNDYES^ISPLAYING(),"_","FALSE","BFITMP28","");M_YES^PLAY("ONFOCUSON");}
BTNYES:ONFOCUSOFF={M_YES^PLAY("ONNOEVENT");}
BTNYES:ONCLICKED={M_BPOPUP^SET(TRUE);POPUP^RUN();}

OBJECT=BTNNO
BTNNO:TYPE=BUTTON
BTNNO:VISIBLE=TRUE
BTNNO:ENABLE=TRUE
BTNNO:DRAGGABLE=FALSE
BTNNO:GFXSTANDARD=M_NO
BTNNO:ONFOCUSON={@IF(M_SNDNO^ISPLAYING(),"_","FALSE","BFITMP31","");M_NO^PLAY("ONFOCUSON");}
BTNNO:ONFOCUSOFF={M_NO^PLAY("ONNOEVENT");}
BTNNO:ONCLICKED={M_BPOPUP^SET(FALSE);POPUP^RUN();}

OBJECT=M_GRPMENU
M_GRPMENU:TYPE=GROUP

OBJECT=M_GRPPOPUP
M_GRPPOPUP:TYPE=GROUP

OBJECT=M_GRPBUTONS
M_GRPBUTONS:TYPE=GROUP

OBJECT=M_SNDNEWGAME
M_SNDNEWGAME:TYPE=SOUND
M_SNDNEWGAME:FILENAME=NAR_F114.WAV
M_SNDNEWGAME:PRELOAD=FALSE
M_SNDNEWGAME:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDCONTINUE
M_SNDCONTINUE:TYPE=SOUND
M_SNDCONTINUE:FILENAME=NAR_F115.WAV
M_SNDCONTINUE:PRELOAD=FALSE
M_SNDCONTINUE:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDLOAD
M_SNDLOAD:TYPE=SOUND
M_SNDLOAD:FILENAME=NAR_F116.WAV
M_SNDLOAD:PRELOAD=FALSE
M_SNDLOAD:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDSAVE
M_SNDSAVE:TYPE=SOUND
M_SNDSAVE:FILENAME=NAR_F117.WAV
M_SNDSAVE:PRELOAD=FALSE
M_SNDSAVE:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDPOPNEW
M_SNDPOPNEW:TYPE=SOUND
M_SNDPOPNEW:FILENAME=NAR_F118.WAV
M_SNDPOPNEW:PRELOAD=FALSE
M_SNDPOPNEW:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDPOPLOAD
M_SNDPOPLOAD:TYPE=SOUND
M_SNDPOPLOAD:FILENAME=NAR_F119.WAV
M_SNDPOPLOAD:PRELOAD=FALSE
M_SNDPOPLOAD:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDPOPSAVE
M_SNDPOPSAVE:TYPE=SOUND
M_SNDPOPSAVE:FILENAME=NAR_F120.WAV
M_SNDPOPSAVE:PRELOAD=FALSE
M_SNDPOPSAVE:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDEXIT
M_SNDEXIT:TYPE=SOUND
M_SNDEXIT:FILENAME=NAR_F121.WAV
M_SNDEXIT:PRELOAD=FALSE
M_SNDEXIT:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDPOPEXIT
M_SNDPOPEXIT:TYPE=SOUND
M_SNDPOPEXIT:FILENAME=NAR_F122.WAV
M_SNDPOPEXIT:PRELOAD=FALSE
M_SNDPOPEXIT:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDYES
M_SNDYES:TYPE=SOUND
M_SNDYES:FILENAME=NAR_F123.WAV
M_SNDYES:PRELOAD=FALSE
M_SNDYES:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDNO
M_SNDNO:TYPE=SOUND
M_SNDNO:FILENAME=NAR_F124.WAV
M_SNDNO:PRELOAD=FALSE
M_SNDNO:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDDONKNOW
M_SNDDONKNOW:TYPE=SOUND
M_SNDDONKNOW:FILENAME=NAR_F125.WAV
M_SNDDONKNOW:PRELOAD=FALSE
M_SNDDONKNOW:FLUSHAFTERPLAYED=FALSE

OBJECT=M_SNDVOLUME
M_SNDVOLUME:TYPE=SOUND
M_SNDVOLUME:FILENAME=NAR_F126.WAV
M_SNDVOLUME:PRELOAD=FALSE
M_SNDVOLUME:FLUSHAFTERPLAYED=FALSE

OBJECT=M_ARRGAMESETS
M_ARRGAMESETS:TYPE=ARRAY

OBJECT=M_ARRCHARACTERS
M_ARRCHARACTERS:TYPE=ARRAY

OBJECT=M_ARRPIOTR
M_ARRPIOTR:TYPE=ARRAY

OBJECT=CONSTRUCTOR
CONSTRUCTOR:TYPE=BEHAVIOUR
CONSTRUCTOR:CODE={M_ARRPIOTR^ADD("LABIRYNT","MIOTLY","CAT","BARANDALF","DRAGON","SHOOTER");M_SHOT1^SETPOSITION(579,85);M_SHOT2^SETPOSITION(579,185);M_SHOT3^SETPOSITION(579,285);M_SHOT4^SETPOSITION(579,385);M_ARRCHARACTERS^ADD("BUREKTOR","GULDRYK","SNEJK","WALDIMORS","SPIELMAUSTER","CHRUMBURAK");M_ARRCHARACTERS^ADD("BARANDALF","KROLOWA","KAMIEN","SMOK","GASIENICA");M_GRPMENU^ADD("M_BKG","M_HIGH1","M_HIGH2","M_HIGH3","M_HIGH4","M_MUSBTN","M_SHOT1","M_SHOT2","M_SHOT3","M_SHOT4");M_GRPMENU^ADD("M_CONTINUE","M_EXIT","M_NEW","M_LOAD1","M_LOAD2","M_LOAD3","M_LOAD4","M_SAVE1","M_SAVE2","M_SAVE3","M_SAVE4");M_GRPBUTONS^ADD("BTNSLIDER","BTNEXIT","BTNNEW","BTNCONTINUE","BTNLOAD1","BTNLOAD2","BTNLOAD3","BTNLOAD4");M_GRPBUTONS^ADD("BTNSAVE1","BTNSAVE2","BTNSAVE3","BTNSAVE4");M_GRPBUTONS^DISABLEBUTVISIBLE();M_GRPPOPUP^ADD("M_POP","M_YES","M_NO");M_IPOPY^SET(80);M_GRPPOPUP^MOVE(0,M_IPOPY);BTNNO^DISABLEBUTVISIBLE();BTNYES^DISABLEBUTVISIBLE();M_GRPMENU^MOVE(0,-540);M_IPOSY^SET(-540);M_ISLIDERX^SET(M_MUSBTN^GETPOSITIONX());M_ITEMP0^SET([800-G_ARRSETTINGS^GET(1)]);M_ITEMP0^MUL(300);M_ITEMP0^DIV(800);M_MUSBTN^MOVE(0,M_ITEMP0);M_ARRGAMESETS^LOAD("$COMMON\GAME0.ARR");@IF(M_ARRGAMESETS^GETSIZE(),"<","6","BFITMP32","BFITMP33");HIGHLIGHT^RUN(0);G_ARRREXSPELLS^LOAD("$COMMON\SPELLS0.ARR");@IF(G_ARRREXSPELLS^GETSIZE(),"<","17","BFITMP34","");@IF(G_ARRREXSPELLS^GET(15),"_","0","BFITMP35","BFITMP36");M_WAND^HIDE();}


OBJECT=NEWGAME
NEWGAME:TYPE=BEHAVIOUR
NEWGAME:CODE={M_ITEMP0^SET(G_ARRDATAS^GETSIZE());HIDEEXP^RUN();@LOOP("{M_STEMP0^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"_DEF.DTA"]);M_STEMP1^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"0.DTA"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ITEMP0,1);M_STEMP0^COPYFILE("$COMMON\ITEMS_DEF.DTA","$COMMON\ITEMS0.DTA");G_ARRCUTSCENES^REMOVEALL();G_ARRCUTSCENES^SAVE("$COMMON\CUTSCENES0.ARR");M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR","$COMMON\QUESTIONS0.ARR");M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR","$COMMON\QUESTIONS_ASKED0.ARR");@LOOP("{M_STEMP0^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST0.ARR"]);M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR",M_STEMP0);}",0,M_ARRCHARACTERS^GETSIZE(),1);G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^ADD(0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0);G_ARRREXSPELLS^SAVE("$COMMON\SPELLS0.ARR");DEFSETS^RUN();M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR","$COMMON\INVEST0.ARR");@LOOP("{M_STEMP0^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"_DEF.ARR"]);M_STEMP1^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"0.ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRPIOTR^GETSIZE(),1);M_IACTION^SET(0);M_KLEPSYDRA^HIDE();M_WAND^HIDE();TOGGLE^RUN();}


OBJECT=NEWGAMESTART
NEWGAMESTART:TYPE=BEHAVIOUR
NEWGAMESTART:CODE={M_ITEMP0^SET(G_ARRDATAS^GETSIZE());HIDEEXP^RUN();@LOOP("{M_STEMP0^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"_DEF.DTA"]);M_STEMP1^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"0.DTA"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ITEMP0,1);M_STEMP0^COPYFILE("$COMMON\ITEMS_DEF.DTA","$COMMON\ITEMS0.DTA");G_ARRCUTSCENES^REMOVEALL();G_ARRCUTSCENES^SAVE("$COMMON\CUTSCENES0.ARR");M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR","$COMMON\QUESTIONS0.ARR");M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR","$COMMON\QUESTIONS_ASKED0.ARR");@LOOP("{M_STEMP0^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST0.ARR"]);M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR",M_STEMP0);}",0,M_ARRCHARACTERS^GETSIZE(),1);G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^ADD(0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0);G_ARRREXSPELLS^SAVE("$COMMON\SPELLS0.ARR");DEFSETS^RUN();M_STEMP0^COPYFILE("$COMMON\QUESTIONS_DEF.ARR","$COMMON\INVEST0.ARR");@LOOP("{M_STEMP0^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"_DEF.ARR"]);M_STEMP1^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"0.ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRPIOTR^GETSIZE(),1);M_IACTION^SET(0);M_KLEPSYDRA^HIDE();M_WAND^HIDE();}


OBJECT=SAVEGAME
SAVEGAME:TYPE=BEHAVIOUR
SAVEGAME:CODE={M_ITEMP1^SET($1);M_ITEMP0^SET(G_ARRDATAS^GETSIZE());@LOOP("{M_STEMP0^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"0.DTA"]);M_STEMP1^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+M_ITEMP1+".DTA"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ITEMP0,1);M_STEMP0^SET(["$COMMON\ITEMS"+M_ITEMP1+".DTA"]);M_STEMP0^COPYFILE("$COMMON\ITEMS0.DTA",M_STEMP0);M_STEMP0^SET(["$COMMON\CUTSCENES"+M_ITEMP1+".ARR"]);G_ARRCUTSCENES^SAVE(M_STEMP0);M_STEMP0^SET(["$COMMON\M_SHOT"+M_ITEMP1+".IMG"]);M_STEMP0^COPYFILE("$COMMON\SAVE.IMG",M_STEMP0);M_STEMP1^SET(["M_SHOT"+M_ITEMP1]);*M_STEMP1^LOAD(M_STEMP0);M_ITEMP0^SET([M_ITEMP1-1]);M_ITEMP0^MUL(100);M_ITEMP0^ADD(85);*M_STEMP1^SETPOSITION(579,M_ITEMP0);*M_STEMP1^SETPRIORITY(4000);M_STEMP0^SET(["$COMMON\QUESTIONS"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE("$COMMON\QUESTIONS0.ARR",M_STEMP0);M_STEMP0^SET(["$COMMON\QUESTIONS_ASKED"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE("$COMMON\QUESTIONS_ASKED0.ARR",M_STEMP0);@LOOP("{M_STEMP0^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST0.ARR"]);M_STEMP1^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRCHARACTERS^GETSIZE(),1);@IF(G_ARRREXSPELLS^GETSIZE(),"<","17","BFITMP37","");M_STEMP0^SET(["$COMMON\SPELLS"+M_ITEMP1+".ARR"]);G_ARRREXSPELLS^SAVE(M_STEMP0);M_STEMP0^SET(["$COMMON\GAME"+M_ITEMP1+".ARR"]);M_ARRGAMESETS^CHANGEAT(0,G_SARCADEOBJECTS);M_ARRGAMESETS^CHANGEAT(1,G_SLASTOBJECTS);M_ARRGAMESETS^CHANGEAT(2,G_SDIALOGCHARACTER);M_ARRGAMESETS^CHANGEAT(3,G_SDIALOGRETURN);M_STEMP1^SET(G_ITKTPM);M_ARRGAMESETS^CHANGEAT(4,M_STEMP1);M_STEMP1^SET(G_IKRETACTIVE);M_ARRGAMESETS^CHANGEAT(5,M_STEMP1);M_ARRGAMESETS^SAVE(M_STEMP0);M_STEMP0^SET(["$COMMON\INVEST"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE("$COMMON\INVEST0.ARR",M_STEMP0);@LOOP("{M_STEMP0^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"0.ARR"]);M_STEMP1^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRPIOTR^GETSIZE(),1);}


OBJECT=LOADGAME
LOADGAME:TYPE=BEHAVIOUR
LOADGAME:CODE={M_ITEMP1^SET($1);M_ITEMP0^SET(G_ARRDATAS^GETSIZE());@LOOP("{M_STEMP0^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+M_ITEMP1+".DTA"]);M_STEMP1^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"0.DTA"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ITEMP0,1);M_STEMP0^SET(["$COMMON\ITEMS"+M_ITEMP1+".DTA"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\ITEMS0.DTA");M_STEMP0^SET(["$COMMON\CUTSCENES"+M_ITEMP1+".ARR"]);G_ARRCUTSCENES^LOAD(M_STEMP0);G_ARRCUTSCENES^SAVE("$COMMON\CUTSCENES0.ARR");M_STEMP0^SET(["$COMMON\QUESTIONS"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\QUESTIONS0.ARR");M_STEMP0^SET(["$COMMON\QUESTIONS_ASKED"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\QUESTIONS_ASKED0.ARR");@LOOP("{M_STEMP1^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST0.ARR"]);M_STEMP0^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRCHARACTERS^GETSIZE(),1);M_STEMP0^SET(["$COMMON\SPELLS"+M_ITEMP1+".ARR"]);G_ARRREXSPELLS^LOAD(M_STEMP0);@IF(G_ARRREXSPELLS^GETSIZE(),"<","17","BFITMP38","");M_STEMP0^SET(["$COMMON\GAME"+M_ITEMP1+".ARR"]);M_ARRGAMESETS^LOAD(M_STEMP0);@IF(M_ARRGAMESETS^GETSIZE(),"<","6","BFITMP39","BFITMP40");M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\GAME0.ARR");M_STEMP0^SET(["$COMMON\INVEST"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\INVEST0.ARR");@LOOP("{M_STEMP1^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"0.ARR"]);M_STEMP0^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRPIOTR^GETSIZE(),1);ADDEXP^RUN(0);M_IACTION^SET(1);TOGGLE^RUN();}

OBJECT=LOADPIK
LOADPIK:TYPE=BEHAVIOUR
LOADPIK:CODE={M_ITEMP1^SET(5);LOADER^RUN();}

OBJECT=LOADBARAN
LOADBARAN:TYPE=BEHAVIOUR
LOADBARAN:CODE={M_ITEMP1^SET(6);LOADER^RUN();}

OBJECT=LOADBAJKI
LOADBAJKI:TYPE=BEHAVIOUR
LOADBAJKI:CODE={M_ITEMP1^SET(7);LOADER^RUN();}

OBJECT=LOADWALDI
LOADWALDI:TYPE=BEHAVIOUR
LOADWALDI:CODE={M_ITEMP1^SET(8);LOADER^RUN();ADDEXP^RUN(1000);}

OBJECT=LOADSALA
LOADSALA:TYPE=BEHAVIOUR
LOADSALA:CODE={M_ITEMP1^SET(9);LOADER^RUN();}

OBJECT=LOADER
LOADER:TYPE=BEHAVIOUR
LOADER:CODE={M_ITEMP0^SET(G_ARRDATAS^GETSIZE());@LOOP("{M_STEMP0^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+M_ITEMP1+".DTA"]);M_STEMP1^SET(["$COMMON\"+G_ARRDATAS^GET(_I_)+"0.DTA"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ITEMP0,1);M_STEMP0^SET(["$COMMON\ITEMS"+M_ITEMP1+".DTA"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\ITEMS0.DTA");M_STEMP0^SET(["$COMMON\CUTSCENES"+M_ITEMP1+".ARR"]);G_ARRCUTSCENES^LOAD(M_STEMP0);G_ARRCUTSCENES^SAVE("$COMMON\CUTSCENES0.ARR");M_STEMP0^SET(["$COMMON\QUESTIONS"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\QUESTIONS0.ARR");M_STEMP0^SET(["$COMMON\QUESTIONS_ASKED"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\QUESTIONS_ASKED0.ARR");@LOOP("{M_STEMP1^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST0.ARR"]);M_STEMP0^SET(["$COMMON\"+M_ARRCHARACTERS^GET(_I_)+"_HIST"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRCHARACTERS^GETSIZE(),1);M_STEMP0^SET(["$COMMON\SPELLS"+M_ITEMP1+".ARR"]);G_ARRREXSPELLS^LOAD(M_STEMP0);@IF(G_ARRREXSPELLS^GETSIZE(),"<","17","BFITMP38","");M_STEMP0^SET(["$COMMON\GAME"+M_ITEMP1+".ARR"]);M_ARRGAMESETS^LOAD(M_STEMP0);DEFSETS^RUN();M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\GAME0.ARR");M_STEMP0^SET(["$COMMON\INVEST"+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,"$COMMON\INVEST0.ARR");@LOOP("{M_STEMP1^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+"0.ARR"]);M_STEMP0^SET(["$COMMON\"+M_ARRPIOTR^GET(_I_)+M_ITEMP1+".ARR"]);M_STEMP0^COPYFILE(M_STEMP0,M_STEMP1);}",0,M_ARRPIOTR^GETSIZE(),1);ADDEXP^RUN(0);M_IACTION^SET(1);G_CARD^LOAD();}

OBJECT=FADEIN
FADEIN:TYPE=BEHAVIOUR
FADEIN:CODE={M_IDIR^SET(1);M_ANNSTL^PLAY("ELAPSE");}


OBJECT=FADEOUT
FADEOUT:TYPE=BEHAVIOUR
FADEOUT:CODE={@IF("M_IPOSY","_","0","BFITMP41","");}


OBJECT=TOGGLE
TOGGLE:TYPE=BEHAVIOUR
TOGGLE:CODE={@IF("M_IPOSY","_","-540","BFITMP42","");@IF("M_IPOSY","_","0","BFITMP43","");}


OBJECT=ISVISIBLE
ISVISIBLE:TYPE=BEHAVIOUR
ISVISIBLE:CODE={@IF("M_IPOSY","_","0","BFITMP44","BFITMP45");@RETURN(M_BTEMP0);}

OBJECT=POPISVISIBLE
POPISVISIBLE:TYPE=BEHAVIOUR
POPISVISIBLE:CODE={@IF("M_IPOPY","_","0","BFITMP70","BFITMP71");@RETURN(M_BTEMP0);}

OBJECT=DEFSETS
DEFSETS:TYPE=BEHAVIOUR
DEFSETS:CODE={M_ARRGAMESETS^REMOVEALL();G_ITKTPM^RANDOM(0,7);M_STEMP0^SET(G_ITKTPM);M_ARRGAMESETS^ADD("INTRO_1","NULL","BUREKTOR","NULL",M_STEMP0,"0");M_ARRGAMESETS^SAVE("$COMMON\GAME0.ARR");G_SARCADEOBJECTS^SET(M_ARRGAMESETS^GET(0));G_SLASTOBJECTS^SET(M_ARRGAMESETS^GET(1));G_SDIALOGCHARACTER^SET(M_ARRGAMESETS^GET(2));G_SDIALOGRETURN^SET(M_ARRGAMESETS^GET(3));G_ITKTPM^SET(M_ARRGAMESETS^GET(4));G_IKRETACTIVE^SET(M_ARRGAMESETS^GET(5));}


OBJECT=RESUMEGAME
RESUMEGAME:TYPE=BEHAVIOUR
RESUMEGAME:CODE={M_ARRGAMESETS^LOAD("$COMMON\GAME0.ARR");@IF(M_ARRGAMESETS^GETSIZE(),"<","6","BFITMP46","");G_SARCADEOBJECTS^SET(M_ARRGAMESETS^GET(0));G_SLASTOBJECTS^SET(M_ARRGAMESETS^GET(1));G_SDIALOGCHARACTER^SET(M_ARRGAMESETS^GET(2));G_SDIALOGRETURN^SET(M_ARRGAMESETS^GET(3));G_ITKTPM^SET(M_ARRGAMESETS^GET(4));G_IKRETACTIVE^SET(M_ARRGAMESETS^GET(5));M_IACTION^SET(1);M_BRESUME^SET(FALSE);TOGGLE^RUN();}


OBJECT=SAVESETS
SAVESETS:TYPE=BEHAVIOUR
SAVESETS:CODE={@IF(M_ARRGAMESETS^GETSIZE(),"<","6","BFITMP47","BFITMP48");}


OBJECT=SAVEEXP
SAVEEXP:TYPE=BEHAVIOUR
SAVEEXP:CODE={@IF(G_ARRREXSPELLS^GETSIZE(),"<","16","BFITMP49","BFITMP50");}


OBJECT=EXIT
EXIT:TYPE=BEHAVIOUR
EXIT:CODE={M_IACTION^SET(7);TOGGLE^RUN();}


OBJECT=HIGHLIGHT
HIGHLIGHT:TYPE=BEHAVIOUR
HIGHLIGHT:CODE={M_ITEMP0^SET($1);@LOOP("{M_ITEMP1^SET(_I_);M_STEMP0^SET(["M_HIGH"+M_ITEMP1]);@IF("M_ITEMP0","_","M_ITEMP1","BFITMP51","BFITMP52");}",1,4,1);}


OBJECT=POPUP
POPUP:TYPE=BEHAVIOUR
POPUP:CODE={@IF("M_IPOPY","_","0","BFITMP53","");@IF("M_IPOPY","_","80","BFITMP54","");}


OBJECT=SETRESUME
SETRESUME:TYPE=BEHAVIOUR
SETRESUME:CODE={M_BRESUME^SET(TRUE);}


OBJECT=ADDEXP
ADDEXP:TYPE=BEHAVIOUR
ADDEXP:CODE={G_ARRREXSPELLS^ADDAT(13,$1);@IF(G_ARRREXSPELLS^GET(15),"_","1","BFITMP57","BFITMP58");SAVEEXP^RUN();}


OBJECT=LEVELUP
LEVELUP:TYPE=BEHAVIOUR
LEVELUP:CODE={@IF("G_ARRREXSPELLS^GET(13)<150&&G_ARRREXSPELLS^GET(13)>-1","BFITMP60","BFITMP61");@RETURN(M_BTEMP0);}


OBJECT=SHOWEXP
SHOWEXP:TYPE=BEHAVIOUR
SHOWEXP:CODE={M_BTEMP0^SET($1);@IF("M_BTEMP0","_","TRUE","BFITMP62","BFITMP63");}


OBJECT=HIDEEXP
HIDEEXP:TYPE=BEHAVIOUR
HIDEEXP:CODE={M_KLEPSYDRA^HIDE();}


OBJECT=SETSCENE
SETSCENE:TYPE=BEHAVIOUR
SETSCENE:CODE={M_SSCENENAME^SET($1);M_WAND^HIDE();M_BRESUME^SET(FALSE);@IF(G_ARRREXSPELLS^GET(15),"_","1","BFITMP64","");SHOWWAND^RUN(FALSE);SHOW^RUN(TRUE);}


OBJECT=SHOW
SHOW:TYPE=BEHAVIOUR
SHOW:CODE={M_BTEMP0^SET($1);@IF("M_BTEMP0","_","TRUE","BFITMP65","BFITMP66");}


OBJECT=SHOWWAND
SHOWWAND:TYPE=BEHAVIOUR
SHOWWAND:CODE={M_BTEMP0^SET($1);@IF("M_BTEMP0","_","TRUE","BFITMP67","BFITMP68");}


OBJECT=GETEXP
GETEXP:TYPE=BEHAVIOUR
GETEXP:CODE={M_ITEMP0^SET(G_ARRREXSPELLS^GET(13));@RETURN(M_ITEMP0);}


OBJECT=STOPALLSOUNDS
STOPALLSOUNDS:TYPE=BEHAVIOUR
STOPALLSOUNDS:CODE={M_SNDNEWGAME^STOP(FALSE);M_SNDCONTINUE^STOP(FALSE);M_SNDLOAD^STOP(FALSE);M_SNDSAVE^STOP(FALSE);M_SNDPOPLOAD^STOP(FALSE);M_SNDPOPNEW^STOP(FALSE);M_SNDPOPSAVE^STOP(FALSE);M_SNDEXIT^STOP(FALSE);M_SNDPOPEXIT^STOP(FALSE);M_SNDYES^STOP(FALSE);M_SNDNO^STOP(FALSE);M_SNDDONKNOW^STOP(FALSE);M_SNDVOLUME^STOP(FALSE);}


OBJECT=BFITMP9
BFITMP9:TYPE=BEHAVIOUR
BFITMP9:CODE={GAME^RUNENV(M_SSCENENAME,"BEHPAUSEEND");}


OBJECT=BFITMP10
BFITMP10:TYPE=BEHAVIOUR
BFITMP10:CODE={BTNMENU^ENABLE();M_GRPBUTONS^DISABLEBUTVISIBLE();BTNNO^DISABLEBUTVISIBLE();BTNYES^DISABLEBUTVISIBLE();M_GRPBUTONS^DISABLE();BTNYES^DISABLE();BTNNO^DISABLE();M_IDOACTION^SET(M_IACTION);M_IACTION^SET(-1);}


OBJECT=BFITMP11
BFITMP11:TYPE=BEHAVIOUR
BFITMP11:CODE={M_GRPBUTONS^ENABLE();BTNYES^ENABLE();BTNNO^ENABLE();}


OBJECT=BFITMP12
BFITMP12:TYPE=BEHAVIOUR
BFITMP12:CODE={M_ANNSTL^STOP(FALSE);@IF("M_IPOSY","_","-540","BFITMP10","BFITMP11");}


OBJECT=BFITMP13
BFITMP13:TYPE=BEHAVIOUR
BFITMP13:CODE={*M_SPOPACTION^RUN(M_IPOPARG);}


OBJECT=BFITMP14
BFITMP14:TYPE=BEHAVIOUR
BFITMP14:CODE={@IF("M_BPOPUP","_","TRUE","BFITMP13","");}


OBJECT=BFITMP15
BFITMP15:TYPE=BEHAVIOUR
BFITMP15:CODE={M_ANNSTL1^STOP(FALSE);@IF("M_IPOPY","_","80","BFITMP14","");}


OBJECT=BFITMP16
BFITMP16:TYPE=BEHAVIOUR
BFITMP16:CODE={STOPALLSOUNDS^RUN();M_SNDVOLUME^PLAY();}


OBJECT=BFITMP17
BFITMP17:TYPE=BEHAVIOUR
BFITMP17:CODE={STOPALLSOUNDS^RUN();M_SNDCONTINUE^PLAY();}


OBJECT=BFITMP18
BFITMP18:TYPE=BEHAVIOUR
BFITMP18:CODE={RESUMEGAME^RUN();}


OBJECT=BFITMP19
BFITMP19:TYPE=BEHAVIOUR
BFITMP19:CODE={TOGGLE^RUN();}


OBJECT=BFITMP20
BFITMP20:TYPE=BEHAVIOUR
BFITMP20:CODE={STOPALLSOUNDS^RUN();M_SNDLOAD^PLAY();}


OBJECT=BFITMP21
BFITMP21:TYPE=BEHAVIOUR
BFITMP21:CODE={STOPALLSOUNDS^RUN();M_SNDLOAD^PLAY();}


OBJECT=BFITMP22
BFITMP22:TYPE=BEHAVIOUR
BFITMP22:CODE={STOPALLSOUNDS^RUN();M_SNDLOAD^PLAY();}


OBJECT=BFITMP23
BFITMP23:TYPE=BEHAVIOUR
BFITMP23:CODE={STOPALLSOUNDS^RUN();M_SNDLOAD^PLAY();}


OBJECT=BFITMP24
BFITMP24:TYPE=BEHAVIOUR
BFITMP24:CODE={STOPALLSOUNDS^RUN();M_SNDSAVE^PLAY();}


OBJECT=BFITMP25
BFITMP25:TYPE=BEHAVIOUR
BFITMP25:CODE={STOPALLSOUNDS^RUN();M_SNDSAVE^PLAY();}


OBJECT=BFITMP26
BFITMP26:TYPE=BEHAVIOUR
BFITMP26:CODE={STOPALLSOUNDS^RUN();M_SNDSAVE^PLAY();}


OBJECT=BFITMP27
BFITMP27:TYPE=BEHAVIOUR
BFITMP27:CODE={STOPALLSOUNDS^RUN();M_SNDSAVE^PLAY();}


OBJECT=BFITMP28
BFITMP28:TYPE=BEHAVIOUR
BFITMP28:CODE={STOPALLSOUNDS^RUN();M_SNDYES^PLAY();}


OBJECT=BFITMP29
BFITMP29:TYPE=BEHAVIOUR
BFITMP29:CODE={M_SNDDONKNOW^PLAY();}


OBJECT=BFITMP30
BFITMP30:TYPE=BEHAVIOUR
BFITMP30:CODE={M_SNDNO^PLAY();}


OBJECT=BFITMP31
BFITMP31:TYPE=BEHAVIOUR
BFITMP31:CODE={STOPALLSOUNDS^RUN();M_ITEMP0^RANDOM(0,100);@IF("M_ITEMP0","<","50","BFITMP29","BFITMP30");}


OBJECT=BFITMP32
BFITMP32:TYPE=BEHAVIOUR
BFITMP32:CODE={DEFSETS^RUN();}


OBJECT=BFITMP33
BFITMP33:TYPE=BEHAVIOUR
BFITMP33:CODE={G_SARCADEOBJECTS^SET(M_ARRGAMESETS^GET(0));G_SLASTOBJECTS^SET(M_ARRGAMESETS^GET(1));G_SDIALOGCHARACTER^SET(M_ARRGAMESETS^GET(2));G_SDIALOGRETURN^SET(M_ARRGAMESETS^GET(3));G_ITKTPM^SET(M_ARRGAMESETS^GET(4));G_IKRETACTIVE^SET(M_ARRGAMESETS^GET(5));}


OBJECT=BFITMP34
BFITMP34:TYPE=BEHAVIOUR
BFITMP34:CODE={G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^ADD(0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0);G_ARRREXSPELLS^SAVE("$COMMON\SPELLS0.ARR");}


OBJECT=BFITMP35
BFITMP35:TYPE=BEHAVIOUR
BFITMP35:CODE={M_KLEPSYDRA^HIDE();}


OBJECT=BFITMP36
BFITMP36:TYPE=BEHAVIOUR
BFITMP36:CODE={ADDEXP^RUN(0);}


OBJECT=BFITMP37
BFITMP37:TYPE=BEHAVIOUR
BFITMP37:CODE={G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^ADD(0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0);}


OBJECT=BFITMP38
BFITMP38:TYPE=BEHAVIOUR
BFITMP38:CODE={G_ARRREXSPELLS^REMOVEALL();G_ARRREXSPELLS^ADD(0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0);}


OBJECT=BFITMP39
BFITMP39:TYPE=BEHAVIOUR
BFITMP39:CODE={DEFSETS^RUN();}


OBJECT=BFITMP40
BFITMP40:TYPE=BEHAVIOUR
BFITMP40:CODE={G_SARCADEOBJECTS^SET(M_ARRGAMESETS^GET(0));G_SLASTOBJECTS^SET(M_ARRGAMESETS^GET(1));G_SDIALOGCHARACTER^SET(M_ARRGAMESETS^GET(2));G_SDIALOGRETURN^SET(M_ARRGAMESETS^GET(3));G_ITKTPM^SET(M_ARRGAMESETS^GET(4));G_IKRETACTIVE^SET(M_ARRGAMESETS^GET(5));}


OBJECT=BFITMP41
BFITMP41:TYPE=BEHAVIOUR
BFITMP41:CODE={M_IDIR^SET(-1);M_ANNSTL^PLAY("ELAPSE");}


OBJECT=BFITMP42
BFITMP42:TYPE=BEHAVIOUR
BFITMP42:CODE={GAME^RUNENV(M_SSCENENAME,"__PAUSESTART__");GAME^RUNENV(M_SSCENENAME,"B_PAUSE_START");@IF("M_SSCENENAME","_",""START"","BFITMP69","");BTNMENU^DISABLEBUTVISIBLE();BTNNO^DISABLEBUTVISIBLE();BTNYES^DISABLEBUTVISIBLE();BTNEXIT^DISABLEBUTVISIBLE();BTNCONTINUE^DISABLEBUTVISIBLE();CANVASOBSERVER^SAVE("$COMMON\SAVE.IMG",0.15,0.15);FADEIN^RUN();M_GRPMENU^RESUME();M_CONTINUE^PLAY("ONNOEVENT");M_SAVE1^PLAY("ONNOEVENT");M_SAVE2^PLAY("ONNOEVENT");M_SAVE3^PLAY("ONNOEVENT");M_SAVE4^PLAY("ONNOEVENT");M_LOAD1^PLAY("ONNOEVENT");M_LOAD2^PLAY("ONNOEVENT");M_LOAD3^PLAY("ONNOEVENT");M_LOAD4^PLAY("ONNOEVENT");}


OBJECT=BFITMP43
BFITMP43:TYPE=BEHAVIOUR
BFITMP43:CODE={M_GRPBUTONS^DISABLEBUTVISIBLE();BTNNO^DISABLEBUTVISIBLE();BTNYES^DISABLEBUTVISIBLE();M_LOAD1^DISABLE();BTNYES^DISABLE();BTNNO^DISABLE();FADEOUT^RUN();}


OBJECT=BFITMP44
BFITMP44:TYPE=BEHAVIOUR
BFITMP44:CODE={M_BTEMP0^SET(TRUE);}


OBJECT=BFITMP45
BFITMP45:TYPE=BEHAVIOUR
BFITMP45:CODE={M_BTEMP0^SET(FALSE);}


OBJECT=BFITMP46
BFITMP46:TYPE=BEHAVIOUR
BFITMP46:CODE={DEFSETS^RUN();}


OBJECT=BFITMP47
BFITMP47:TYPE=BEHAVIOUR
BFITMP47:CODE={DEFSETS^RUN();}


OBJECT=BFITMP48
BFITMP48:TYPE=BEHAVIOUR
BFITMP48:CODE={M_ARRGAMESETS^CHANGEAT(0,G_SARCADEOBJECTS);M_ARRGAMESETS^CHANGEAT(1,G_SLASTOBJECTS);M_ARRGAMESETS^CHANGEAT(2,G_SDIALOGCHARACTER);M_ARRGAMESETS^CHANGEAT(3,G_SDIALOGRETURN);M_STEMP1^SET(G_ITKTPM);M_ARRGAMESETS^CHANGEAT(4,M_STEMP1);M_STEMP1^SET(G_IKRETACTIVE);M_ARRGAMESETS^CHANGEAT(5,M_STEMP1);M_ARRGAMESETS^SAVE("$COMMON\GAME0.ARR");}


OBJECT=BFITMP49
BFITMP49:TYPE=BEHAVIOUR
BFITMP49:CODE={G_ARRREXSPELLS^ADD(0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0);G_ARRREXSPELLS^SAVE("$COMMON\SPELLS0.ARR");}


OBJECT=BFITMP50
BFITMP50:TYPE=BEHAVIOUR
BFITMP50:CODE={G_ARRREXSPELLS^SAVE("$COMMON\SPELLS0.ARR");}


OBJECT=BFITMP51
BFITMP51:TYPE=BEHAVIOUR
BFITMP51:CODE={*M_STEMP0^SHOW();}


OBJECT=BFITMP52
BFITMP52:TYPE=BEHAVIOUR
BFITMP52:CODE={*M_STEMP0^HIDE();}


OBJECT=BFITMP53
BFITMP53:TYPE=BEHAVIOUR
BFITMP53:CODE={M_GRPBUTONS^ENABLE();M_IDIR^SET(1);M_ANNSTL1^PLAY("ELAPSE");}


OBJECT=BFITMP54
BFITMP54:TYPE=BEHAVIOUR
BFITMP54:CODE={M_GRPBUTONS^DISABLEBUTVISIBLE();BTNNO^ENABLE();BTNYES^ENABLE();M_IDIR^SET(-1);M_ANNSTL1^PLAY("ELAPSE");}


OBJECT=BFITMP55
BFITMP55:TYPE=BEHAVIOUR
BFITMP55:CODE={M_ITEMP1^SET(G_ARRREXSPELLS^GET(13));M_ITEMP1^DIV(10);M_ITEMP1^INC();M_KLEPSYDRA^SHOW();M_KLEPSYDRA^SETFRAME("PLAY",M_ITEMP1);}


OBJECT=BFITMP56
BFITMP56:TYPE=BEHAVIOUR
BFITMP56:CODE={M_KLEPSYDRA^PLAY("MIGA");G_ARRREXSPELLS^CHANGEAT(16,1);}


OBJECT=BFITMP57
BFITMP57:TYPE=BEHAVIOUR
BFITMP57:CODE={@IF(G_ARRREXSPELLS^GET(13),"<","150","BFITMP55","BFITMP56");}


OBJECT=BFITMP58
BFITMP58:TYPE=BEHAVIOUR
BFITMP58:CODE={M_KLEPSYDRA^STOP(FALSE);M_KLEPSYDRA^HIDE();}


OBJECT=BFITMP59
BFITMP59:TYPE=BEHAVIOUR
BFITMP59:CODE={M_ITEMP0^SUB(150);G_ARRREXSPELLS^CHANGEAT(13,M_ITEMP0);}


OBJECT=BFITMP60
BFITMP60:TYPE=BEHAVIOUR
BFITMP60:CODE={M_BTEMP0^SET(FALSE);}


OBJECT=BFITMP61
BFITMP61:TYPE=BEHAVIOUR
BFITMP61:CODE={M_ITEMP0^SET(G_ARRREXSPELLS^GET(13));@IF("M_ITEMP0",">","149","BFITMP59","");G_ARRREXSPELLS^ADDAT(14,1);G_ARRREXSPELLS^SUBAT(12,3);G_ARRREXSPELLS^SAVE("SPELLS0.DTA");M_KLEPSYDRA^PLAY("PANEL");M_BTEMP0^SET(TRUE);G_ARRREXSPELLS^CHANGEAT(16,0);}


OBJECT=BFITMP62
BFITMP62:TYPE=BEHAVIOUR
BFITMP62:CODE={G_ARRREXSPELLS^CHANGEAT(15,1);M_KLEPSYDRA^SHOW();ADDEXP^RUN(0);}


OBJECT=BFITMP63
BFITMP63:TYPE=BEHAVIOUR
BFITMP63:CODE={G_ARRREXSPELLS^CHANGEAT(15,0);M_KLEPSYDRA^STOP(FALSE);M_KLEPSYDRA^HIDE();SAVEEXP^RUN();}


OBJECT=BFITMP64
BFITMP64:TYPE=BEHAVIOUR
BFITMP64:CODE={M_KLEPSYDRA^SHOW();ADDEXP^RUN(0);}


OBJECT=BFITMP65
BFITMP65:TYPE=BEHAVIOUR
BFITMP65:CODE={BTNMENU^ENABLE();}


OBJECT=BFITMP66
BFITMP66:TYPE=BEHAVIOUR
BFITMP66:CODE={BTNMENU^DISABLE();}


OBJECT=BFITMP67
BFITMP67:TYPE=BEHAVIOUR
BFITMP67:CODE={M_WAND^SHOW();}


OBJECT=BFITMP68
BFITMP68:TYPE=BEHAVIOUR
BFITMP68:CODE={M_WAND^HIDE();}

OBJECT=BFITMP69
BFITMP69:TYPE=BEHAVIOUR
BFITMP69:CODE={GAME^RUNENV(M_SSCENENAME,"BEHEMAPWSUN");}


OBJECT=BFITMP70
BFITMP70:TYPE=BEHAVIOUR
BFITMP70:CODE={M_BTEMP0^SET(TRUE);}

OBJECT=BFITMP71
BFITMP71:TYPE=BEHAVIOUR
BFITMP71:CODE={M_BTEMP0^SET(FALSE);}


